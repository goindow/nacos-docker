2021-04-26 10:10:59,149 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 10:10:59,326 INFO initializing Raft sub-system

2021-04-26 10:10:59,331 INFO finish loading all datums, size: 0 cost 5 ms.

2021-04-26 10:10:59,351 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 10:10:59,351 INFO finish to load data from disk, cost: 25 ms.

2021-04-26 10:10:59,403 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 10:11:00,578 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 10:11:01,967 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 10:11:09,364 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 10:11:09,877 ERROR error while sending vote to server: nacos2:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:11:09,879 ERROR error while sending vote to server: nacos3:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:11:21,240 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619403079239, raftPort=7848, site=unknown, weight=3}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619403081231, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_instance_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=2}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service_v2={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=2}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=2}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619403074025, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@7529329d, raftPort=7848, readyToUpgrade=true, version=2.0.0}}]

2021-04-26 10:11:24,981 INFO vote nacos2:8848 as leader, term: 2

2021-04-26 10:11:29,287 WARN start to close old raft protocol!!!

2021-04-26 10:11:29,287 WARN stop old raft protocol task for notifier

2021-04-26 10:11:29,287 WARN stop old raft protocol task for master task

2021-04-26 10:11:29,287 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:11:29,287 WARN clean old cache datum for old raft

2021-04-26 10:11:29,287 WARN start to close old raft protocol!!!

2021-04-26 10:11:29,287 WARN stop old raft protocol task for notifier

2021-04-26 10:11:29,287 WARN stop old raft protocol task for master task

2021-04-26 10:11:29,288 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:11:29,288 WARN clean old cache datum for old raft

2021-04-26 10:11:29,288 WARN start to move old raft protocol metadata

2021-04-26 10:11:29,288 WARN start to move old raft protocol metadata

2021-04-26 10:25:13,830 INFO raft peers changed: [Member{ip='172.31.0.2', port=8848, state=UP, extendInfo={raftPort=7848, version=2.0.0}}]

2021-04-26 10:25:13,952 INFO initializing Raft sub-system

2021-04-26 10:25:13,972 INFO finish loading all datums, size: 0 cost 19 ms.

2021-04-26 10:25:13,983 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 10:25:13,983 INFO finish to load data from disk, cost: 30 ms.

2021-04-26 10:25:14,031 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 10:25:16,593 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 10:25:17,578 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 10:25:18,903 WARN start to close old raft protocol!!!

2021-04-26 10:25:18,903 WARN stop old raft protocol task for notifier

2021-04-26 10:25:18,903 WARN stop old raft protocol task for master task

2021-04-26 10:25:18,903 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:25:18,903 WARN clean old cache datum for old raft

2021-04-26 10:25:18,903 WARN start to close old raft protocol!!!

2021-04-26 10:25:18,903 WARN stop old raft protocol task for notifier

2021-04-26 10:25:18,903 WARN stop old raft protocol task for master task

2021-04-26 10:25:18,903 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:25:18,903 WARN clean old cache datum for old raft

2021-04-26 10:25:18,903 WARN start to move old raft protocol metadata

2021-04-26 10:25:18,904 WARN start to move old raft protocol metadata

2021-04-26 10:28:37,221 INFO raft peers changed: [Member{ip='192.168.0.2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='集群节点列表', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 10:28:37,295 INFO initializing Raft sub-system

2021-04-26 10:28:37,333 INFO finish loading all datums, size: 0 cost 37 ms.

2021-04-26 10:28:37,346 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 10:28:37,346 INFO finish to load data from disk, cost: 50 ms.

2021-04-26 10:28:37,352 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 10:28:38,117 INFO raft peers changed: [Member{ip='192.168.0.2', port=8848, state=UP, extendInfo={raftPort=7848, version=2.0.0}}, Member{ip='nacos3', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='集群节点列表', port=8848, state=DOWN, extendInfo={raftPort=7848}}]

2021-04-26 10:28:38,363 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 10:28:38,646 ERROR error while sending vote to server: nacos1:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:28:38,652 ERROR error while sending vote to server: nacos2:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:28:38,653 ERROR error while sending vote to server: nacos3:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:28:38,692 ERROR error while sending vote to server: 集群节点列表:8848

java.net.UnknownHostException: ??????: Name or service not known
	at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method)
	at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:929)
	at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1324)
	at java.net.InetAddress.getAllByName0(InetAddress.java:1277)
	at java.net.InetAddress.getAllByName(InetAddress.java:1193)
	at java.net.InetAddress.getAllByName(InetAddress.java:1127)
	at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:45)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager$InternalAddressResolver.resolveRemoteAddress(PoolingNHttpClientConnectionManager.java:637)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager$InternalAddressResolver.resolveRemoteAddress(PoolingNHttpClientConnectionManager.java:608)
	at org.apache.http.nio.pool.AbstractNIOConnPool.processPendingRequest(AbstractNIOConnPool.java:474)
	at org.apache.http.nio.pool.AbstractNIOConnPool.lease(AbstractNIOConnPool.java:280)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.requestConnection(PoolingNHttpClientConnectionManager.java:268)
	at org.apache.http.impl.nio.client.AbstractClientExchangeHandler.requestConnection(AbstractClientExchangeHandler.java:377)
	at org.apache.http.impl.nio.client.DefaultClientExchangeHandlerImpl.start(DefaultClientExchangeHandlerImpl.java:129)
	at org.apache.http.impl.nio.client.InternalHttpAsyncClient.execute(InternalHttpAsyncClient.java:141)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:75)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:108)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:92)
	at com.alibaba.nacos.common.http.client.request.DefaultAsyncHttpClientRequest.execute(DefaultAsyncHttpClientRequest.java:52)
	at com.alibaba.nacos.common.http.client.NacosAsyncRestTemplate.execute(NacosAsyncRestTemplate.java:364)
	at com.alibaba.nacos.common.http.client.NacosAsyncRestTemplate.postForm(NacosAsyncRestTemplate.java:350)
	at com.alibaba.nacos.naming.misc.HttpClient.asyncHttpRequest(HttpClient.java:189)
	at com.alibaba.nacos.naming.misc.HttpClient.asyncHttpPost(HttpClient.java:146)
	at com.alibaba.nacos.naming.consistency.persistent.raft.RaftCore$MasterElection.sendVote(RaftCore.java:518)
	at com.alibaba.nacos.naming.consistency.persistent.raft.RaftCore$MasterElection.run(RaftCore.java:494)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:28:39,231 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 10:28:40,330 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 11:00:13,991 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 11:00:14,105 INFO initializing Raft sub-system

2021-04-26 11:00:14,113 INFO finish loading all datums, size: 0 cost 7 ms.

2021-04-26 11:00:14,119 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 11:00:14,119 INFO finish to load data from disk, cost: 13 ms.

2021-04-26 11:00:14,137 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 11:00:14,575 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 11:00:15,309 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 11:00:19,142 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 11:00:19,283 ERROR error while sending vote to server: nacos2:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 11:00:19,285 ERROR error while sending vote to server: nacos3:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 11:00:30,006 WARN [IS LEADER] no leader is available now!

2021-04-26 11:00:32,814 INFO vote nacos2:8848 as leader, term: 2

2021-04-26 11:00:37,219 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619406037018, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_persistent_service_v2={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619406035930, naming={voteFor=nacos2:8848, ip=nacos2:8848, heartbeatDueMs=4500, term=2, leaderDueMs=15858, state=LEADER}, raftPort=7848, site=unknown, weight=3}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619406036781, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@907d57, raftPort=7848, readyToUpgrade=true, version=2.0.0}}]

2021-04-26 11:00:39,097 WARN start to close old raft protocol!!!

2021-04-26 11:00:39,097 WARN stop old raft protocol task for notifier

2021-04-26 11:00:39,097 WARN stop old raft protocol task for master task

2021-04-26 11:00:39,097 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:00:39,097 WARN clean old cache datum for old raft

2021-04-26 11:00:39,097 WARN start to close old raft protocol!!!

2021-04-26 11:00:39,097 WARN stop old raft protocol task for notifier

2021-04-26 11:00:39,097 WARN stop old raft protocol task for master task

2021-04-26 11:00:39,097 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:00:39,097 WARN clean old cache datum for old raft

2021-04-26 11:00:39,097 WARN start to move old raft protocol metadata

2021-04-26 11:00:39,097 WARN start to move old raft protocol metadata

2021-04-26 11:03:09,674 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619406189045, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_persistent_service_v2={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos2', port=8848, state=SUSPICIOUS, extendInfo={lastRefreshTime=1619406181483, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_persistent_service_v2={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619406189490, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@907d57, raftPort=7848, readyToUpgrade=true, version=2.0.0}}]

