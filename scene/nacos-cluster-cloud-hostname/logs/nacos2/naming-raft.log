2021-04-26 10:10:59,334 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 10:10:59,478 INFO initializing Raft sub-system

2021-04-26 10:10:59,488 INFO finish loading all datums, size: 0 cost 10 ms.

2021-04-26 10:10:59,493 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 10:10:59,493 INFO finish to load data from disk, cost: 15 ms.

2021-04-26 10:10:59,509 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 10:11:00,328 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 10:11:01,985 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 10:11:08,026 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 10:11:08,311 ERROR error while sending vote to server: nacos1:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:11:08,332 ERROR error while sending vote to server: nacos3:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 10:11:15,009 WARN [IS LEADER] no leader is available now!

2021-04-26 10:11:24,278 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619403084100, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_instance_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=2}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service_v2={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=2}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=2}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619403074050, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@2f878c8f, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619403082008, naming={voteFor=nacos1:8848, ip=nacos1:8848, heartbeatDueMs=3000, term=1, leaderDueMs=3121, state=CANDIDATE}, raftPort=7848, site=unknown, weight=3}}]

2021-04-26 10:11:24,973 INFO leader timeout, start voting,leader: null, term: 1

2021-04-26 10:11:24,996 INFO received approve from peer: {"ip":"nacos1:8848","voteFor":"nacos2:8848","term":2,"leaderDueMs":15435,"heartbeatDueMs":5000,"state":"FOLLOWER"}

2021-04-26 10:11:24,998 ERROR NACOS-RAFT vote failed: 500, url: http://nacos3:8848/nacos/v1/ns/raft/vote

2021-04-26 10:11:25,003 INFO nacos2:8848 has become the LEADER

2021-04-26 10:11:29,430 WARN start to close old raft protocol!!!

2021-04-26 10:11:29,430 WARN stop old raft protocol task for notifier

2021-04-26 10:11:29,430 WARN stop old raft protocol task for master task

2021-04-26 10:11:29,430 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:11:29,430 WARN clean old cache datum for old raft

2021-04-26 10:11:29,430 WARN start to close old raft protocol!!!

2021-04-26 10:11:29,430 WARN stop old raft protocol task for notifier

2021-04-26 10:11:29,430 WARN stop old raft protocol task for master task

2021-04-26 10:11:29,430 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:11:29,430 WARN clean old cache datum for old raft

2021-04-26 10:11:29,430 WARN start to move old raft protocol metadata

2021-04-26 10:11:29,430 WARN start to move old raft protocol metadata

2021-04-26 10:25:13,432 INFO raft peers changed: [Member{ip='172.31.0.4', port=8848, state=UP, extendInfo={raftPort=7848, version=2.0.0}}]

2021-04-26 10:25:13,530 INFO initializing Raft sub-system

2021-04-26 10:25:13,533 INFO finish loading all datums, size: 0 cost 3 ms.

2021-04-26 10:25:13,538 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 10:25:13,538 INFO finish to load data from disk, cost: 8 ms.

2021-04-26 10:25:13,550 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 10:25:15,041 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 10:25:15,891 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 10:25:17,062 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 10:25:18,490 WARN start to close old raft protocol!!!

2021-04-26 10:25:18,490 WARN stop old raft protocol task for notifier

2021-04-26 10:25:18,490 WARN stop old raft protocol task for master task

2021-04-26 10:25:18,490 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:25:18,490 WARN clean old cache datum for old raft

2021-04-26 10:25:18,490 WARN start to close old raft protocol!!!

2021-04-26 10:25:18,490 WARN stop old raft protocol task for notifier

2021-04-26 10:25:18,490 WARN stop old raft protocol task for master task

2021-04-26 10:25:18,490 WARN stop old raft protocol task for heartbeat task

2021-04-26 10:25:18,490 WARN clean old cache datum for old raft

2021-04-26 10:25:18,491 WARN start to move old raft protocol metadata

2021-04-26 10:25:18,491 WARN start to move old raft protocol metadata

2021-04-26 10:28:36,210 INFO raft peers changed: [Member{ip='192.168.0.4', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='集群节点列表', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 10:28:36,247 INFO initializing Raft sub-system

2021-04-26 10:28:36,250 INFO finish loading all datums, size: 0 cost 3 ms.

2021-04-26 10:28:36,254 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 10:28:36,254 INFO finish to load data from disk, cost: 7 ms.

2021-04-26 10:28:36,258 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 10:28:37,172 INFO raft peers changed: [Member{ip='192.168.0.4', port=8848, state=UP, extendInfo={raftPort=7848, version=2.0.0}}, Member{ip='nacos3', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='集群节点列表', port=8848, state=DOWN, extendInfo={raftPort=7848}}]

2021-04-26 10:28:37,664 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 10:28:38,582 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 11:00:12,159 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 11:00:12,271 INFO initializing Raft sub-system

2021-04-26 11:00:12,276 INFO finish loading all datums, size: 0 cost 5 ms.

2021-04-26 11:00:12,284 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 11:00:12,291 INFO finish to load data from disk, cost: 20 ms.

2021-04-26 11:00:12,309 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 11:00:12,847 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 11:00:13,781 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 11:00:14,796 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 11:00:15,094 ERROR error while sending vote to server: nacos1:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 11:00:15,094 ERROR error while sending vote to server: nacos3:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 11:00:32,796 INFO leader timeout, start voting,leader: null, term: 1

2021-04-26 11:00:32,845 INFO received approve from peer: {"ip":"nacos1:8848","voteFor":"nacos2:8848","term":2,"leaderDueMs":18154,"heartbeatDueMs":1000,"state":"FOLLOWER"}

2021-04-26 11:00:32,850 INFO nacos2:8848 has become the LEADER

2021-04-26 11:00:32,882 INFO received approve from peer: {"ip":"nacos3:8848","voteFor":"nacos2:8848","term":2,"leaderDueMs":18486,"heartbeatDueMs":5000,"state":"FOLLOWER"}

2021-04-26 11:00:35,043 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619406035041, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619406032850, naming={voteFor=nacos2:8848, ip=nacos2:8848, heartbeatDueMs=5000, term=2, leaderDueMs=16358, state=LEADER}, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@29f1f265, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619406033799, naming={voteFor=nacos2:8848, ip=nacos1:8848, heartbeatDueMs=5000, term=2, leaderDueMs=17154, state=FOLLOWER}, raftPort=7848, site=unknown, weight=3}}]

2021-04-26 11:00:37,326 WARN start to close old raft protocol!!!

2021-04-26 11:00:37,326 WARN stop old raft protocol task for notifier

2021-04-26 11:00:37,326 WARN stop old raft protocol task for master task

2021-04-26 11:00:37,326 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:00:37,326 WARN clean old cache datum for old raft

2021-04-26 11:00:37,326 WARN start to close old raft protocol!!!

2021-04-26 11:00:37,326 WARN stop old raft protocol task for notifier

2021-04-26 11:00:37,326 WARN stop old raft protocol task for master task

2021-04-26 11:00:37,326 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:00:37,326 WARN clean old cache datum for old raft

2021-04-26 11:00:37,326 WARN start to move old raft protocol metadata

2021-04-26 11:00:37,326 WARN start to move old raft protocol metadata

2021-04-26 11:00:39,011 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619406039009, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_persistent_service_v2={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619406037326, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@29f1f265, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619406036663, raftMetaData={metaDataMap={nacos_config={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos2:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}]

2021-04-26 11:04:36,693 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619406276576, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@646811d6, raftPort=7848, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={raftPort=7848}}]

2021-04-26 11:04:36,765 INFO initializing Raft sub-system

2021-04-26 11:04:36,768 INFO finish loading all datums, size: 0 cost 3 ms.

2021-04-26 11:04:36,781 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 11:04:36,781 INFO finish to load data from disk, cost: 16 ms.

2021-04-26 11:04:36,795 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 11:04:37,415 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 11:04:38,043 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 11:04:42,763 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 11:04:42,779 ERROR NACOS-RAFT vote failed: 500, url: http://nacos3:8848/nacos/v1/ns/raft/vote

2021-04-26 11:04:42,781 ERROR NACOS-RAFT vote failed: 500, url: http://nacos1:8848/nacos/v1/ns/raft/vote

2021-04-26 11:04:43,242 INFO raft peers changed: [Member{ip='nacos3', port=8848, state=UP, extendInfo={lastRefreshTime=1619406283235, raftMetaData={metaDataMap={nacos_config={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=5}, naming_instance_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=3}, naming_persistent_service={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=5}, naming_persistent_service_v2={leader=nacos1:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}, naming_service_metadata={leader=nacos3:7848, raftGroupMember=[nacos3:7848, nacos1:7848, nacos2:7848], term=4}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos2', port=8848, state=UP, extendInfo={lastRefreshTime=1619406279654, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@646811d6, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='nacos1', port=8848, state=UP, extendInfo={lastRefreshTime=1619406280224, naming={ip=nacos1:8848, heartbeatDueMs=1817, term=-1, leaderDueMs=14959, state=FOLLOWER}, raftPort=7848}}]

2021-04-26 11:04:45,004 WARN [IS LEADER] no leader is available now!

2021-04-26 11:04:46,729 WARN start to close old raft protocol!!!

2021-04-26 11:04:46,729 WARN stop old raft protocol task for notifier

2021-04-26 11:04:46,729 WARN stop old raft protocol task for master task

2021-04-26 11:04:46,729 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:04:46,729 WARN clean old cache datum for old raft

2021-04-26 11:04:46,729 WARN start to close old raft protocol!!!

2021-04-26 11:04:46,729 WARN stop old raft protocol task for notifier

2021-04-26 11:04:46,729 WARN stop old raft protocol task for master task

2021-04-26 11:04:46,729 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:04:46,729 WARN clean old cache datum for old raft

2021-04-26 11:04:46,729 WARN start to move old raft protocol metadata

2021-04-26 11:04:46,729 WARN start to move old raft protocol metadata

