2021-04-26 11:27:08,446 INFO raft peers changed: [Member{ip='192.168.100.13', port=8848, state=DOWN, extendInfo={raftPort=7848}}, Member{ip='192.168.100.12', port=8848, state=UP, extendInfo={raftPort=7848}}, Member{ip='192.168.100.11', port=8848, state=DOWN, extendInfo={raftPort=7848}}]

2021-04-26 11:27:08,530 INFO initializing Raft sub-system

2021-04-26 11:27:08,583 INFO finish loading all datums, size: 0 cost 53 ms.

2021-04-26 11:27:08,599 INFO cache loaded, datum count: 0, current term: 0

2021-04-26 11:27:08,599 INFO finish to load data from disk, cost: 69 ms.

2021-04-26 11:27:08,651 INFO timer started: leader timeout ms: 15000, heart-beat timeout ms: 5000

2021-04-26 11:27:09,510 INFO add listener: com.alibaba.nacos.naming.domains.meta.

2021-04-26 11:27:10,925 INFO add listener: com.alibaba.nacos.naming.domains.meta.00-00---000-NACOS_SWITCH_DOMAIN-000---00-00

2021-04-26 11:27:21,439 INFO leader timeout, start voting,leader: null, term: 0

2021-04-26 11:27:23,075 ERROR error while sending vote to server: 192.168.100.13:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 11:27:23,081 ERROR error while sending vote to server: 192.168.100.11:8848

java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.lang.Thread.run(Thread.java:748)
2021-04-26 11:27:27,498 INFO vote 192.168.100.13:8848 as leader, term: 2

2021-04-26 11:27:29,743 INFO raft peers changed: [Member{ip='192.168.100.13', port=8848, state=UP, extendInfo={lastRefreshTime=1619407649508, naming={voteFor=192.168.100.13:8848, ip=192.168.100.13:8848, heartbeatDueMs=5000, term=2, leaderDueMs=16843, state=LEADER}, raftMetaData={metaDataMap={nacos_config={leader=192.168.100.12:7848, raftGroupMember=[192.168.100.13:7848, 192.168.100.11:7848, 192.168.100.12:7848], term=1}, naming_instance_metadata={leader=192.168.100.12:7848, raftGroupMember=[192.168.100.13:7848, 192.168.100.11:7848, 192.168.100.12:7848], term=1}, naming_persistent_service={leader=192.168.100.12:7848, raftGroupMember=[192.168.100.13:7848, 192.168.100.11:7848, 192.168.100.12:7848], term=1}, naming_persistent_service_v2={leader=192.168.100.11:7848, raftGroupMember=[192.168.100.13:7848, 192.168.100.11:7848, 192.168.100.12:7848], term=1}, naming_service_metadata={leader=192.168.100.13:7848, raftGroupMember=[192.168.100.13:7848, 192.168.100.11:7848, 192.168.100.12:7848], term=2}}}, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='192.168.100.12', port=8848, state=UP, extendInfo={lastRefreshTime=1619407648996, raftMetaData=com.alibaba.nacos.consistency.ProtocolMetaData@30376d9a, raftPort=7848, readyToUpgrade=true, version=2.0.0}}, Member{ip='192.168.100.11', port=8848, state=DOWN, extendInfo={lastRefreshTime=1619407649335, naming={voteFor=192.168.100.11:8848, ip=192.168.100.11:8848, heartbeatDueMs=3000, term=1, leaderDueMs=11578, state=CANDIDATE}, raftPort=7848, site=unknown, weight=3}}]

2021-04-26 11:27:30,004 WARN [IS LEADER] no leader is available now!

2021-04-26 11:27:32,084 INFO 192.168.100.13:8848 has become the LEADER, local: {"ip":"192.168.100.12:8848","voteFor":"192.168.100.13:8848","term":2,"leaderDueMs":17804,"heartbeatDueMs":5000,"state":"FOLLOWER"}, leader: {"ip":"192.168.100.13:8848","voteFor":"192.168.100.13:8848","term":2,"leaderDueMs":18850,"heartbeatDueMs":5000,"state":"LEADER"}

2021-04-26 11:27:33,557 WARN start to close old raft protocol!!!

2021-04-26 11:27:33,557 WARN stop old raft protocol task for notifier

2021-04-26 11:27:33,557 WARN stop old raft protocol task for master task

2021-04-26 11:27:33,558 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:27:33,558 WARN clean old cache datum for old raft

2021-04-26 11:27:33,558 WARN start to close old raft protocol!!!

2021-04-26 11:27:33,558 WARN stop old raft protocol task for notifier

2021-04-26 11:27:33,558 WARN stop old raft protocol task for master task

2021-04-26 11:27:33,558 WARN stop old raft protocol task for heartbeat task

2021-04-26 11:27:33,558 WARN clean old cache datum for old raft

2021-04-26 11:27:33,558 WARN start to move old raft protocol metadata

2021-04-26 11:27:33,558 WARN start to move old raft protocol metadata

